#!/bin/bash

X_values=(5 10 30 60 120)

echo "Sending Random Payload..."
echo "Hello World!" | nc -u -w 0 -p 56182 43.143.0.0 443

for X in "${X_values[@]}"; do
    #  Wait for X seconds (added +1 to make sure censorship is triggered)
    echo "Waiting for $X seconds before sending QUIC Client Hello..."
    sleep $((X+1))

    # Send clienthello thrice with a 1-second gap between each
    for i in {1..3}; do
        echo "Sending QUIC Client Hello (attempt $i)..."
        echo "c4000000010eaef9731cd9eea9c9eb6ae8d86c3304126e48540044e4f79e502534516d9a0721018ce008153ea1b3ff21f705f399ae7602f34cf8dd8c49eec525c5813a3d87d74a1626b45807bee456b4bae6dacf3360eb544cd972a7d1583ef76376f661dcdab2546cc4d03f5797de9d448fb99d901517be8f8c14274fdc3809b8d35109bc49db49f7d2208adbc10184c312c966d2e60a31c753800248a8a196ad9074bfca661c714c18c42f106767198a1447fd2789af01da55f7f97c0f00b879b17c7490a21191f786caf17eb224c9ce523a91033b23c1900599262534d7e76ef28760ea909b6638a0d361c9a3fc2aee50f97f35c79aae5f612a909e1fbfab8ad0a4a4b83fdbf30f4218c7d9427a42ff7b8a53a18b991e3979290b4802e2587b81f4f43d75cd70bc3005239c2c9599d2737ae98e62bcf061890c945cf5f439aa37f553584f6895a33ce65070b2be45253f75bd527017c65cfaff8289c0c85dbb546bc0c1dc9b07c84e50a197c653990da51c4610cd1db80a1f323f1af965e415ca98737c83c81473434403ce57b4360513b5555196930e8856b106f663692006ad7da4c7a3e93ac62d304876846668edaf0db1d504562897648a557e34a9169411c6080ad928cd230ccdcd596cfd89f17c81f76e50194d578a0628816f62983c0b5eaa1cc1de2d2feefcf291ed899112ad2a546379bb42f2b4773926f809d39fa9add415302d5d3ddc02491bb2c9be6a61190d6d30526ea703ffb14d4f14028ba667bc73de2b3f5dd084057f3876a2ffefdb81f075d6bf264a358c5da164a169312bdc4318d0e1fbd79c7204a9e56c8f097220be4a892cd92d10b0f648468f40f4316ccab1d1da06d037d47a796acb77fc24170559dda7e27545047eaab5e7be5488509bb651fcb087e773fa9ce53ce7962047c51ecd3c5efa105cfcdfa2e16f6797bd14c51b3b1e8c3c0a6b9ccb5ef82d9682f3feb393ed48604bfe8fcdd52e59f028218b5fbf30b029145ee69c9f3f3df0c67157d0a730e85da3372673c73795907613bc2cb13c60e0c993ee9262177123de9b66d9472b645ce5a8f31a3f01aaad3b1172f9dac92649123a769017feab8de3c964a278cf2f44cb29407a75c7db356ad0a8bee0e9c23bd71aabd89dc0bdad2d66ef8ca243fe5f8c6204c0b1d0189b206dba9855c0854866db9a0b17d8259d08c7581d1eb95ca0c034d501ff568751bf9e5425ae74032f2ff562b12052036f0b4a12623296ec1b4e39b9a0a13925fbbd8a44a6929a70214cb4c94101d70db6f487e9eab521f5f60f0ce795beda28d573398b665f971d7be12b92b328fac75209538e1098f668f9ccf01a9abddb895a582668ddb6a665c603e6b9afce19b67e97041c1e0f3bfe4083cfc6954580a775d20423491be12251ba1e3f953dd4b62d93c3ce9a2e5f89ae60d36ea9a7657264e412267c6d98733ee5d6c22a970ad679290749a8aa9a336a25bea1f4b3145d1cc8288889e5fb61e7fc93d31d635e351a6b922e9bb314d70f4740f7d3eaf5b0752c750547d86974018e3bd44b81defbce5524a9b54d6ed79a1515d1c80b9f947afd75b84dfb4aa592830ae11e844ded8afde4e3e780bb809ee28dea65782a4278cef0bad17f151ec353bc01243286ac69a992880d8fc6a8d09ce703f12c82afd760592d19f9c6f40e1f7d5ae8ec0fc86bf459e0469a1924a0485ad59aef94c54a922aab640cfaede22ab9a9cfee19307347ffa032a8873fa60b2505f9abb417da0699740fcfb06dd301de9bbeffc20bf3768692c812a315b7fe53260e35" | xxd -r -p | nc -u -w 0 -p 56182 43.143.0.0 443
        sleep 1
    done

done

echo "Done!"
